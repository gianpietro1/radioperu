= form_for [artist,album], :html => {:id => "album_form"}  do |f|  
  .row
    .col-md-6
      .form_group
        = f.label t(:album_name)
        = f.text_field :name, class: 'form-control'
      .form_group
        = f.label t(:album_review)
        = f.text_area :review, class: 'form-control'
      .form_group
        = f.label t(:album_year)
        = f.text_field :year, class: 'form-control'
      .form_group
        = f.label t(:album_format)
        - formats_array = Format.all.map { |format| [format.name, format.id]}
        = f.select(:format_id, options_for_select(formats_array, f.object.format_id), {:size => 15, :class => 'form-control half-width'})
      .form_group
        = f.label t(:genre)
        - genres_array = Genre.all.map { |genre| [genre.name, genre.id] }
        = f.select(:genre_id, options_for_select(genres_array, f.object.genre_id), {:size => 15, :class => 'form-control half-width'})
      .form_group
        = f.label t(:album_cover)
        = f.file_field :cover, class: 'form-control'
        = f.hidden_field :cover_cache
        - if f.object.cover
          .current_file
            - file = URI.unescape(URI(f.object.cover.to_s).path.split('/').last.to_s)
            = t(:current_file) + ': ' + (file.length > 0 ? file : "-").to_s
  .row
    .col-md-10
      %h4 
        = t(:songs_title)
      .song_instructions.msg.alert.alert-warning
        - if I18n.locale == :es
          .bold.font-11em
            Instrucciones para subir canciones
          %ul
            %li.bold
              Los archivos deben estar en MP3, esto es indispensable.
            %li
              Se recomienda que la calidad de los archivos MP3 sea de 128Kbps, de lo contrario demorarán más en subir no sólo debido al tamaño del archivo, sino porque haremos la conversión automática y esto agregará varios segundos por canción.
            %li
              Haciendo clic en el "check" para cada canción, es posible extraer el título y número de canción automáticamente del archivo MP3 (etiquetas conocidas como "ID3").  Para mejores resultados, asegurarse que la versión de ID3 sea 2.3 o superior, de no saberlo es mejor tipear los títulos manualmente.
            %li
              Revisa que los títulos de las canciones sean los que desees que los oyentes vean. Se pide no cambiarlos posteriormente (o avisarnos), sobre todo para las canciones que se deseen rotar en la radio.
            %li
              Se sugiere subir las canciones en grupos (por ejemplo de a 5), sobre todo en conexiones de Internet lentas.
            %li.bold  
              Si deseas que hagamos la carga nosotros, envíanos los archivos a contacto@radioperu.pe y lo haremos con mucho gusto.
        - elsif I18n.locale == :en
          .bold.font-11em
            Instructions for song uploading
          %ul
            %li.bold
              Files must be MP3.
            %li
              We recommend quality to be 128Kbps, otherwise they will take longer to upload not only because of their size, but because we'll covert them anyway and this will add some seconds per song. 
            %li
              Clicking on the checkbox, it's possible to extract the song title and other information from the MP3 file, please ensure that the title is correctly spelled and ID3 tags version is 2.3 or later for better results.
            %li
              Check that the titles are as you want them to be seen by your listeners.  We ask you to not change them over time, especially if the song is going to be broadcasted at the radio stations.
            %li
              We recommend to upload them in groups of around 5, especially in slower Internet connections.
            %li.bold
              If you need help or need us to upload the songs, please email us to contacto@radioperu.pe
  .row.text-center.bold
    .col-md-3
      = t(:song_filename)
    .col-md-1.id3
      = t(:id3)
    .col-md-1
      = t(:song_discnum)
    .col-md-1
      = t(:song_track)
    .col-md-5
      = t(:song_name)
  = f.fields_for :songs do |song|
    = render 'song_fields', :f => song
  .links.margin-top-05
    = link_to_add_association t(:add_song), f, :songs, class: 'btn btn-primary btn-sm'
  .row.margin-top-05
    .col-md-12
      .form_group.pull-right
        - if @album.persisted?
          = link_to t(:cancel), [@artist,@album], class: "btn btn-danger"
        - else
          = link_to t(:cancel), [@artist], class: "btn btn-danger"
        = f.submit t(:form_save), class: 'btn btn-success'
