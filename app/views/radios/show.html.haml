.row
  %ul.radionav
    - (1..@radios.count).each do |i|
      %li
        - if @radio.id == i
          =link_to @radios.find_by(id:i).name, radio_path(id: i), class: 'highlighted'
        - else
          =link_to @radios.find_by(id:i).name, radio_path(id: i)

.row
  .col-md-1
  .col-md-5
    .radio_container
      .station_title
        %h3
          = @radio.name.titleize + ' - ' + @radio.description.camelize
      .station_player
        #player
          %script{:type=>"text/javascript", :src=>@radio.player}
        #songtitle
          #artist
          #song
      .artist-info
        #artist-image
        #artist-bio
      .album-info
        #album-cover
        #album-name
        #album-year
  .col-md-1    




= javascript_include_tag 'jquery.shoutcast.min.js'


%script{:type=>"text/javascript"}

  setInterval(function(){

  $.SHOUTcast({host : 'eclipse.wavestreamer.com',port:3771}).stats(function(){
  
  // Capture artist and song from Shoutcast server
  var artist = this.get('songtitle').substring(0, this.get('songtitle').indexOf(" - "));
  var song = this.get('songtitle').substring(this.get('songtitle').indexOf(" - ") + 2);

  // Append artist and song to player
  $('#artist').text(artist);
  $('#song').text(song);

  // Pass artist to model and append to 'artist bio' div
  $("#artist-bio").html("#{escape_javascript Artist.find_by(name:"Pamela Rodríguez").bio}");
  
  // Pass artist to model and append to 'artist image' div
  $("#artist-image").html("#{escape_javascript image_tag(Artist.find_by(name:"Pamela Rodríguez").image.midsize)}");

  // Pass artist & song to model and append to 'album name' div
  $("#album-name").html("#{escape_javascript Artist.find_by(name:"Pamela Rodríguez").songs.find_by(name:"Lejos").album.name}");  
  
  // Pass artist & song to model and append to 'album year' div
  $("#album-year").html("#{escape_javascript Artist.find_by(name:"Pamela Rodríguez").songs.find_by(name:"Lejos").album.year.to_s}");

  // Pass artist & song to model and append to 'album cover' div
  $("#album-cover").html("#{escape_javascript image_tag(Artist.find_by(name:"Pamela Rodríguez").songs.find_by(name:"Lejos").album.cover.thumb)}");

  });

  // Do all of this every 3 seconds
  },3000);